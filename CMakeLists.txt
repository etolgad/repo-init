CMAKE_MINIMUM_REQUIRED(VERSION 3.19)

PROJECT(app LANGUAGES CXX)
SET(PROJECT_VERSION 1.0.0.0)
SET(PROJECT_DESCRIPTION "Project description.")

SET(CMAKE_CXX_STANDARD 14)
SET(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${CMAKE_SOURCE_DIR}/build/Debug/lib/static)
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG ${CMAKE_SOURCE_DIR}/build/Debug/lib/shared)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${CMAKE_SOURCE_DIR}/build/Debug/bin)

SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${CMAKE_SOURCE_DIR}/build/Release/lib/static)
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE ${CMAKE_SOURCE_DIR}/build/Release/lib/shared)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${CMAKE_SOURCE_DIR}/build/Release/bin)

SET(CMAKE_GENERATOR "Unix Makefiles")
SET(CMAKE_BUILD_TYPE Debug)
SET(CMAKE_DEBUG_POSTFIX d)

LIST(APPEND CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake/modules)
INCLUDE(Colorize)
INCLUDE(CompilerOptions)
INCLUDE(CompilerFlags)
INCLUDE(ParseConfigs)

CONFIGURE_FILE(
    ${CMAKE_SOURCE_DIR}/cmake/information.hpp.in 
    ${CMAKE_SOURCE_DIR}/include/information.hpp)

ADD_SUBDIRECTORY(${CMAKE_SOURCE_DIR}/3rdparty)

ADD_EXECUTABLE(${PROJECT_NAME} 
    ${CMAKE_SOURCE_DIR}/src/main.cpp)

TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME}
    PUBLIC
        ${CMAKE_SOURCE_DIR}/include
        ${CMAKE_SOURCE_DIR}/3rdparty/rapidjson/include
        ${CMAKE_SOURCE_DIR}/3rdparty/boost/libs/program_options/include/boost
        ${CMAKE_SOURCE_DIR}/3rdparty/libzmq/include
        ${CMAKE_SOURCE_DIR}/3rdparty/cppzmq)

TARGET_LINK_LIBRARIES(${PROJECT_NAME}
    boost_program_options
    spdlog)
